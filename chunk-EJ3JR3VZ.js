import{a as Pe}from"./chunk-AAUSFOJD.js";import{a as ve}from"./chunk-F5GSPX5L.js";import{a as J,f as ue,g as he}from"./chunk-CA6VMXSI.js";import{a as Fe}from"./chunk-EXN4H5IN.js";import{a as fe}from"./chunk-YGQQBXJS.js";import{a as de}from"./chunk-KY2US4V6.js";import"./chunk-23P6OKCW.js";import{a as $}from"./chunk-7Y7O4CRB.js";import"./chunk-TC4YL6MJ.js";import{a as ce}from"./chunk-LJQV5NXZ.js";import"./chunk-W3WFKL4L.js";import"./chunk-VFFUA34V.js";import{C as V,g as me,i as U,j,k as Q,l as A,n as C,o as I,r as pe,t as le}from"./chunk-Q4JR3AAV.js";import{g as N}from"./chunk-UPX2NF3Z.js";import{Aa as Z,Fa as v,Na as Ce,Sa as Ie,Ya as ee,jb as T,mb as ne,nb as ae,pb as se,ua as x,va as k,wa as w,ya as E,za as L}from"./chunk-FQ7J7ZTL.js";import{$a as n,$b as X,Ab as d,Ba as m,Bb as D,Ca as S,Dc as te,Gb as _,Hb as y,Hc as M,Ic as ie,Kc as re,Mc as oe,Nc as O,Ob as W,Pa as G,Ra as o,Yc as B,_ as p,ab as s,bb as g,ca as f,d as c,fb as q,fc as R,ib as l,ja as z,ka as K,kb as b,sa as F,sb as h,tb as H,vc as Y}from"./chunk-NE7DBUAQ.js";var Be=()=>["hh:mm"];function Ne(i,ye){if(i&1){let e=q();n(0,"div",9)(1,"app-button",10),l("clicked",function(){z(e);let t=b();return K(t.openDeleteModal())}),h(2,"Delete"),s()()}if(i&2){let e=b();m(),o("elId",e.elIds.PresetTaskItemDelete)}}function Ve(i,ye){if(i&1&&(n(0,"app-button",11),h(1),s()),i&2){let e=b();o("elId",e.elIds.PresetTaskItemSubmit)("disabled",e.form.invalid),m(),H(e.submitLabel)}}var ge=(()=>{class i{constructor(){this.modalService=p(V),this.save=new F,this.cancel=new F,this.remove=new F,this.elIds=E,this.subscriptions=[]}get submitLabel(){return T.getSubmitLabel(this.formType)}get canEdit(){return!T.isViewForm(this.formType)}showDelete(){return T.isEditForm(this.formType)}onCancel(){this.cancel.emit()}openDeleteModal(){this.modalService.confirmation(L(),()=>this.remove.emit())}openSaveModal(){this.modalService.confirmation(Z(),()=>T.onSubmit(this.form,this.save))}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-preset-task-item-form"]],inputs:{form:"form",formType:"formType"},outputs:{save:"save",cancel:"cancel",remove:"remove"},standalone:!0,features:[d],decls:10,vars:8,consts:[["app-form-layout","",1,"form-layout",3,"ngSubmit","id","formGroup","canEdit"],[1,"form-grid",3,"appScrollTo"],["fcName","title","labelText","Task","placeholder","Enter the task title"],["fcName","comment","labelText","Comment","placeholder","Enter a comment"],["fcName","time","labelText","Time","type","time",3,"helpers"],[1,"form-buttons"],["class","left-buttons",4,"ngIf"],["model","raised","elId","cPresetTaskItemFormCancel","color","accent",3,"clicked"],["model","raised","type","submit",3,"elId","disabled",4,"ngIf"],[1,"left-buttons"],["model","raised","color","warn",3,"clicked","elId"],["model","raised","type","submit",3,"elId","disabled"]],template:function(r,t){r&1&&(n(0,"form",0),l("ngSubmit",function(){return t.openSaveModal()}),n(1,"div",1),g(2,"app-input",2)(3,"app-textarea",3)(4,"app-input",4),n(5,"div",5),G(6,Ne,3,1,"div",6),n(7,"app-button",7),l("clicked",function(){return t.onCancel()}),h(8,"Cancel"),s(),G(9,Ve,2,3,"app-button",8),s()()()),r&2&&(o("id",t.elIds.PresetTaskItemForm)("formGroup",t.form)("canEdit",t.canEdit),m(),o("appScrollTo",!0),m(3),o("helpers",D(7,Be)),m(2),o("ngIf",t.showDelete()),m(3),o("ngIf",t.canEdit))},dependencies:[B,oe,M,O,$,fe,de,Pe,X,N],changeDetection:0})}}return i})();var Se=(()=>{class i{constructor(){this.service=p(C),this.formType=v.Create}ngOnInit(){this.initForm()}initForm(){this.form=Q.from(A())}submitForm(){return this.create()}create(){return c(this,null,function*(){let{id:e}=yield this.service.insert(this.service.toJson(this.form));this.service.goToDetails(e,k.View)})}onCancel(){return this.service.goToList()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-create-preset-task-item"]],standalone:!0,features:[d],decls:1,vars:2,consts:[[3,"cancel","save","form","formType"]],template:function(r,t){r&1&&(n(0,"app-preset-task-item-form",0),l("cancel",function(){return t.onCancel()})("save",function(){return t.submitForm()}),s()),r&2&&o("form",t.form)("formType",t.formType)},dependencies:[ge]})}}return i})();var $e=["cancel",""],Ge=()=>["hh:mm"];function Re(i,ye){if(i&1){let e=q();n(0,"div",12)(1,"app-button",13),l("clicked",function(){z(e);let t=b();return K(t.openDeleteModal())}),h(2,"Delete"),s()()}if(i&2){let e=b();m(),o("elId",e.elIds.ProfileDelete)}}function xe(i,ye){if(i&1&&(n(0,"app-button",14),h(1),s()),i&2){let e=b();o("elId",e.elIds.ProfileSubmit)("disabled",e.form.invalid),m(),H(e.submitLabel)}}var _e=(()=>{class i{constructor(){this.service=p(I),this.taskService=p(C),this.modalService=p(V),this.save=new F,this.cancel=new F,this.remove=new F,this.elIds=E,this.subscriptions=[],this.taskOptions$=this.taskService.taskOptions$,this.typeOptions$=this.service.typeOptions$}get submitLabel(){return T.getSubmitLabel(this.formType)}get canEdit(){return!T.isViewForm(this.formType)}showDelete(){return T.isEditForm(this.formType)}onCancel(){this.cancel.emit()}openDeleteModal(){this.modalService.confirmation(L(),()=>this.remove.emit())}openSaveModal(){this.modalService.confirmation(Z(),()=>T.onSubmit(this.form,this.save))}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-profile-form","cancel",""]],inputs:{form:"form",formType:"formType"},outputs:{save:"save",cancel:"cancel",remove:"remove"},standalone:!0,features:[d],attrs:$e,decls:15,vars:17,consts:[["app-form-layout","",1,"form-layout",3,"ngSubmit","id","formGroup","canEdit"],[1,"form-grid",3,"appScrollTo"],["fcName","name","labelText","Name","placeholder","Profile Name"],["fcName","timeTarget","labelText","Time Target","type","time",3,"helpers"],["fcName","tasksTarget","labelText","Tasks Target","type","number"],["fcName","priority","labelText","Priority","type","number"],["fcName","profileTypeId","labelText","Type",3,"options","elId"],["fcName","taskIds","labelText","Preset Tasks",3,"options","elId","multiple"],[1,"form-buttons"],["class","left-buttons",4,"ngIf"],["model","raised","elId","cProfileFormCancel","color","accent",3,"clicked"],["model","raised","type","submit",3,"elId","disabled",4,"ngIf"],[1,"left-buttons"],["model","raised","color","warn",3,"clicked","elId"],["model","raised","type","submit",3,"elId","disabled"]],template:function(r,t){r&1&&(n(0,"form",0),l("ngSubmit",function(){return t.openSaveModal()}),n(1,"div",1),g(2,"app-input",2)(3,"app-input",3)(4,"app-input",4)(5,"app-input",5)(6,"app-select",6),_(7,"async"),g(8,"app-select",7),_(9,"async"),n(10,"div",8),G(11,Re,3,1,"div",9),n(12,"app-button",10),l("clicked",function(){return t.onCancel()}),h(13,"Cancel"),s(),G(14,xe,2,3,"app-button",11),s()()()),r&2&&(o("id",t.elIds.ProfileForm)("formGroup",t.form)("canEdit",t.canEdit),m(),o("appScrollTo",!0),m(2),o("helpers",D(16,Ge)),m(3),o("options",y(7,12,t.typeOptions$))("elId",t.elIds.ProfileFormType),m(2),o("options",y(9,14,t.taskOptions$))("elId",t.elIds.PresetTaskItemFormTasks)("multiple",!0),m(3),o("ngIf",t.showDelete()),m(3),o("ngIf",t.canEdit))},dependencies:[B,oe,M,O,$,fe,de,Fe,X,N,R],changeDetection:0})}}return i})();var De=(()=>{class i{constructor(e){this.service=e,this.formType=v.Create}ngOnInit(){this.initForm(),this.loadData()}initForm(){this.form=U.from(j())}loadData(){return c(this,null,function*(){yield this.service.loadCreateData()})}submitForm(){return this.create()}create(){return c(this,null,function*(){let{id:e}=yield this.service.insert(this.service.toJson(this.form));this.service.goToDetails(e,k.View)})}onCancel(){return this.service.goToList()}static{this.\u0275fac=function(r){return new(r||i)(S(I))}}static{this.\u0275cmp=f({type:i,selectors:[["app-create-profile"]],standalone:!0,features:[d],decls:1,vars:2,consts:[[3,"cancel","save","form","formType"]],template:function(r,t){r&1&&(n(0,"app-profile-form",0),l("cancel",function(){return t.onCancel()})("save",function(){return t.submitForm()}),s()),r&2&&o("form",t.form)("formType",t.formType)},dependencies:[_e]})}}return i})();var ke=(()=>{class i{constructor(){this.service=p(C),this.pageService=p(pe),this.cdRef=p(W),this.subscriptions=[]}get formType(){return this.pageData?.type?this.pageData?.type:v.Edit}ngOnInit(){this.initSubscriptions()}ngOnDestroy(){ne.unsub(this.subscriptions)}runInitMethods(){this.initUrlParams(),this.initForm(),this.loadData()}initSubscriptions(){this.subscriptions.push(this.pageService.getQueryParamsObservable().subscribe(()=>{this.runInitMethods()}))}initUrlParams(){this.pageData=this.pageService.getDetailsUrlParams()}loadData(){return c(this,null,function*(){let e=yield this.service.loadEditData(this.pageData?.id);if(e==null){this.service.goToList();return}this.form==null&&(this.form=Q.from(A())),this.form.patchValue(this.service.convertToFormValue(e)),this.form.markAllAsTouched(),this.cdRef.detectChanges()})}initForm(){this.form==null?this.form=Q.from(A()):this.form.patchValue({})}submitForm(){return{[v.Edit]:()=>this.editItem(),[v.Duplicate]:()=>this.duplicateItem()}[this.formType]()}editItem(){return c(this,null,function*(){yield this.service.update(this.pageData?.id,this.service.toJson(this.form))})}duplicateItem(){return c(this,null,function*(){let{id:e}=yield this.service.duplicate(this.service.toJson(this.form));this.service.goToDetails(e,k.View)})}onRemove(){return c(this,null,function*(){yield this.service.deleteItem(this.pageData?.id),this.service.goToList()})}onCancel(){return this.service.goToList()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-preset-task-item-details"]],standalone:!0,features:[d],decls:1,vars:2,consts:[[3,"cancel","save","remove","form","formType"]],template:function(r,t){r&1&&(n(0,"app-preset-task-item-form",0),l("cancel",function(){return t.onCancel()})("save",function(){return t.submitForm()})("remove",function(){return t.onRemove()}),s()),r&2&&o("form",t.form)("formType",t.formType)},dependencies:[ge]})}}return i})();var Ue=()=>[],we=(()=>{class i{constructor(){this.service=p(C),this.toaster=p(me),this.modalService=p(V),this.filterService=p(le),this.listItems$=this.service.listItems$,this.total$=this.service.total$,this.lastOptions$=this.service.lastOptions$,this.config={itemConfigs:Ce.tableItems(),orderBy:{key:"id",direction:"asc"},detailsUrl:w.presetTaskItemsDetails,hasCopy:!0,hasDelete:!0,hasEdit:!0,hasView:!0},this.elIds=E,this.deleteItem=e=>c(this,null,function*(){yield this.service.deleteItem(e),this.service.goToList()})}ngOnInit(){this.initFilterForm()}initFilterForm(){let e=new ie({name:new re("",{nonNullable:!0,validators:[te.maxLength(250)]})});this.filterForm=e}onFilter(){this.filterService.filterDebounced(this.loadFilteredItems.bind(this))}applyFilter(){this.filterService.cancelPreviousCall(),this.loadFilteredItems()}loadFilteredItems(){return c(this,null,function*(){let{name:e}=this.filterForm.value;e!==this.prevFilter&&(this.prevFilter=e,yield this.service.loadListItems(this.getPaginationQuery(1)))})}paginate(e){return c(this,null,function*(){if(e==null){this.toaster.error("Error while paginating");return}let{pageIndex:r,pageSize:t}=e;this.service.loadListItems(this.getPaginationQuery(r+1,t))})}getPaginationQuery(e,r){return ee.from(e,r??this.service.getItemsPerPage(),{filter:{title:this.prevFilter?[[ae.Contains,this.prevFilter]]:void 0},orderBy:se.orderByToOData(this.config.orderBy)})}openDeleteModal(e){this.modalService.confirmation(L(),()=>this.deleteItem(e))}handleOrderBy(){this.service.loadListItems(this.getPaginationQuery(1))}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-preset-task-item-list"]],standalone:!0,features:[d],decls:8,vars:14,consts:[["id","cPresetTaskItemListContainer"],["app-form-layout","",1,"search-bar",3,"id","formGroup"],["fcName","name","labelText","Search","placeholder","Filter by name","elId","cPresetTaskItemListNameFilter",3,"filter","apply"],[3,"deleteItem","orderByChanged","items","config","elId"],[3,"pageChanged","totalItems","currentPage"]],template:function(r,t){if(r&1&&(n(0,"article",0)(1,"header",1)(2,"app-search",2),l("filter",function(){return t.onFilter()})("apply",function(){return t.applyFilter()}),s()(),n(3,"app-table",3),_(4,"async"),l("deleteItem",function(u){return t.openDeleteModal(u)})("orderByChanged",function(){return t.handleOrderBy()}),s(),n(5,"app-pagination",4),_(6,"async"),_(7,"async"),l("pageChanged",function(u){return t.paginate(u)}),s()()),r&2){let a,u;m(),o("id","cPresetTaskItemList")("formGroup",t.filterForm),m(2),o("items",(a=y(4,7,t.listItems$))!==null&&a!==void 0?a:D(13,Ue))("config",t.config)("elId",t.elIds.PresetTaskItemTable),m(2),o("totalItems",y(6,9,t.total$))("currentPage",(u=(u=y(7,11,t.lastOptions$))==null?null:u.page)!==null&&u!==void 0?u:1)}},dependencies:[$,B,M,O,ve,he,ue,R],styles:[".search-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center}"],changeDetection:0})}}return i})();var Ee=(()=>{class i{constructor(){this.service=p(C),this.paths=w}ngOnInit(){this.service.loadListData()}goToCreate(){this.service.goToCreate()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-preset-task-items"]],standalone:!0,features:[d],decls:6,vars:1,consts:[[1,"list-header"],["titleText","Tasks"],["model","link","elId","cPresetTaskItemsButtonCreate",3,"url"]],template:function(r,t){r&1&&(n(0,"header",0),g(1,"app-title",1),n(2,"app-button",2),h(3," Create Task "),s()(),g(4,"app-preset-task-item-list")(5,"router-outlet")),r&2&&(m(2),o("url",t.paths.presetTaskItemsCreate))},dependencies:[ce,N,we,Y],changeDetection:0})}}return i})();var Le=(()=>{class i{get formType(){return this.pageData?.type?this.pageData?.type:v.Edit}constructor(e,r,t){this.service=e,this.pageService=r,this.cdRef=t,this.subscriptions=[]}ngOnInit(){this.initSubscriptions()}ngOnDestroy(){ne.unsub(this.subscriptions)}runInitMethods(){this.initUrlParams(),this.initForm(),this.loadData()}initSubscriptions(){this.subscriptions.push(this.pageService.getQueryParamsObservable().subscribe(()=>{this.runInitMethods()}))}initUrlParams(){this.pageData=this.pageService.getDetailsUrlParams()}loadData(){return c(this,null,function*(){let e=yield this.service.loadEditData(this.pageData?.id);if(e==null){this.service.goToList();return}this.form==null&&(this.form=U.from(j())),this.form.patchValue(this.service.convertToFormValue(e)),this.form.markAllAsTouched(),this.cdRef.detectChanges()})}initForm(){this.form==null?this.form=U.from(j()):this.form.patchValue({})}submitForm(){return{[v.Edit]:()=>this.editItem(),[v.Duplicate]:()=>this.duplicateItem()}[this.formType]()}editItem(){return c(this,null,function*(){yield this.service.update(this.pageData?.id,this.service.toJson(this.form))})}duplicateItem(){return c(this,null,function*(){let{id:e}=yield this.service.duplicate(this.service.toJson(this.form));this.service.goToDetails(e,k.View)})}onRemove(){return c(this,null,function*(){yield this.service.deleteItem(this.pageData?.id),this.service.goToList()})}onCancel(){return this.service.goToList()}static{this.\u0275fac=function(r){return new(r||i)(S(I),S(pe),S(W))}}static{this.\u0275cmp=f({type:i,selectors:[["app-profile-details"]],standalone:!0,features:[d],decls:1,vars:2,consts:[[3,"cancel","save","remove","form","formType"]],template:function(r,t){r&1&&(n(0,"app-profile-form",0),l("cancel",function(){return t.onCancel()})("save",function(){return t.submitForm()})("remove",function(){return t.onRemove()}),s()),r&2&&o("form",t.form)("formType",t.formType)},dependencies:[_e]})}}return i})();var je=()=>[],Me=(()=>{class i{constructor(){this.service=p(I),this.toaster=p(me),this.modalService=p(V),this.filterService=p(le),this.listItems$=this.service.listItems$,this.total$=this.service.total$,this.lastOptions$=this.service.lastOptions$,this.config={itemConfigs:Ie.tableItems(),orderBy:{key:"id",direction:"asc"},detailsUrl:w.profilesDetails,hasCopy:!0,hasDelete:!0,hasEdit:!0,hasView:!0},this.elIds=E,this.deleteItem=e=>c(this,null,function*(){yield this.service.deleteItem(e),this.service.goToList()})}ngOnInit(){this.initFilterForm()}initFilterForm(){let e=new ie({name:new re("",{nonNullable:!0,validators:[te.maxLength(250)]})});this.filterForm=e}onFilter(){this.filterService.filterDebounced(this.loadFilteredItems.bind(this))}applyFilter(){this.filterService.cancelPreviousCall(),this.loadFilteredItems()}loadFilteredItems(){return c(this,null,function*(){let{name:e}=this.filterForm.value;e!==this.prevFilter&&(this.prevFilter=e,yield this.service.loadListItems(this.getPaginationQuery(1)))})}paginate(e){return c(this,null,function*(){if(e==null){this.toaster.error("Error while paginating");return}let{pageIndex:r,pageSize:t}=e;this.service.loadListItems(this.getPaginationQuery(r+1,t))})}getPaginationQuery(e,r){return ee.from(e,r??this.service.getItemsPerPage(),{filter:{name:this.prevFilter?[[ae.Contains,this.prevFilter]]:void 0},orderBy:se.orderByToOData(this.config.orderBy)})}openDeleteModal(e){this.modalService.confirmation(L(),()=>this.deleteItem(e))}handleOrderBy(){this.service.loadListItems(this.getPaginationQuery(1))}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-profile-list"]],standalone:!0,features:[d],decls:8,vars:14,consts:[["id","cProfileListContainer"],["app-form-layout","",1,"search-bar",3,"id","formGroup"],["fcName","name","labelText","Search","placeholder","Filter by name","elId","cProfileListNameFilter",3,"filter","apply"],[3,"deleteItem","orderByChanged","items","config","elId"],[3,"pageChanged","totalItems","currentPage"]],template:function(r,t){if(r&1&&(n(0,"article",0)(1,"header",1)(2,"app-search",2),l("filter",function(){return t.onFilter()})("apply",function(){return t.applyFilter()}),s()(),n(3,"app-table",3),_(4,"async"),l("deleteItem",function(u){return t.openDeleteModal(u)})("orderByChanged",function(){return t.handleOrderBy()}),s(),n(5,"app-pagination",4),_(6,"async"),_(7,"async"),l("pageChanged",function(u){return t.paginate(u)}),s()()),r&2){let a,u;m(),o("id","cProfileList")("formGroup",t.filterForm),m(2),o("items",(a=y(4,7,t.listItems$))!==null&&a!==void 0?a:D(13,je))("config",t.config)("elId",t.elIds.ProfileTable),m(2),o("totalItems",y(6,9,t.total$))("currentPage",(u=(u=y(7,11,t.lastOptions$))==null?null:u.page)!==null&&u!==void 0?u:1)}},dependencies:[$,B,M,O,ve,he,ue,R],styles:[".search-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center}"],changeDetection:0})}}return i})();var Oe=(()=>{class i{constructor(e){this.service=e,this.paths=w}ngOnInit(){this.service.loadListData()}goToCreate(){this.service.goToCreate()}static{this.\u0275fac=function(r){return new(r||i)(S(I))}}static{this.\u0275cmp=f({type:i,selectors:[["app-profiles"]],standalone:!0,features:[d],decls:6,vars:1,consts:[[1,"list-header"],["titleText","Profiles"],["model","link","elId","cProfilesButtonCreate",3,"url"]],template:function(r,t){r&1&&(n(0,"header",0),g(1,"app-title",1),n(2,"app-button",2),h(3," Create Profile "),s()(),g(4,"app-profile-list")(5,"router-outlet")),r&2&&(m(2),o("url",t.paths.profilesCreate))},dependencies:[ce,N,Me,Y],changeDetection:0})}}return i})();var lr=[{path:"",component:Oe,children:[{path:x.Create,component:De,canDeactivate:[J]},{path:x.Details,component:Le,canDeactivate:[J]}]}],cr=[{path:"",component:Ee,children:[{path:x.Create,component:Se,canDeactivate:[J]},{path:x.Details,component:ke,canDeactivate:[J]}]}];export{cr as PRESET_TASK_ITEM_ROUTES,lr as PROFILE_ROUTES};
