import{a as k,b as w}from"./chunk-7Y7O4CRB.js";import{a as A,b as B}from"./chunk-W3WFKL4L.js";import{a as R,b as $,f as U,g as z}from"./chunk-VFFUA34V.js";import{d as G,f as j}from"./chunk-UPX2NF3Z.js";import{T as E,Va as T,W as y,jb as u,mb as D,oa as F}from"./chunk-FQ7J7ZTL.js";import{$a as a,$b as S,Ab as C,Ba as i,Ca as d,Gc as M,Hc as N,Na as x,Nc as O,Ob as I,Pa as s,Qc as L,Ra as o,Yc as W,_b as b,ab as r,bb as v,ca as g,ia as _,kb as p,sb as c,tb as f,ub as h}from"./chunk-NE7DBUAQ.js";var q=["fcName","","labelText","","options",""];function H(t,l){if(t&1&&(a(0,"mat-label"),c(1),r()),t&2){let e=p(2);i(),f(e.labelText)}}function J(t,l){if(t&1&&(a(0,"mat-option",7),c(1),r()),t&2){let e,n=l.$implicit,m=p(2);o("id",m.id+"Option"+((e=n.id)!==null&&e!==void 0?e:n.value))("value",n.value),i(),h(" ",n.label," ")}}function Q(t,l){t&1&&(a(0,"span",8),v(1,"app-loading",9),r()),t&2&&(i(),o("size",24))}function V(t,l){if(t&1&&(a(0,"mat-error"),c(1),r()),t&2){let e=p(2);i(),f(e.getErrText())}}function X(t,l){if(t&1&&(a(0,"small",10),c(1),r()),t&2){let e=p(2);i(),h(" ",e.helpers," ")}}function Y(t,l){if(t&1&&(a(0,"mat-form-field",1),s(1,H,2,1,"mat-label",2),a(2,"mat-select",3),s(3,J,2,3,"mat-option",4),r(),s(4,Q,2,1,"span",5)(5,V,2,1,"mat-error",2)(6,X,2,1,"small",6),r()),t&2){let e=p();o("appearance",e.appearance)("formGroup",e.fg),i(),o("ngIf",e.labelText),i(),o("placeholder",e.placeholder)("formControlName",e.fcName)("multiple",e.multiple)("compareWith",e.compareWithFn)("id",e.id),i(),o("ngForOf",e.options),i(),o("ngIf",e.isLoading),i(),o("ngIf",e.invalid&&!!e.disabled),i(),o("ngIf",e.helpers&&!e.invalid&&!!e.disabled)}}var ue=(()=>{class t extends T{get fg(){return this.formWrapper?.formGroup??null}get formId(){return this.formWrapper?.id??""}get control(){return this.fg.controls[this.fcName]}get disabled(){return!!this.control?.disabled}get id(){return this.elId||u.buildId(this.fcName,this.formId)}get canEditSelf(){return this.canEdit&&this.formWrapper?.canEdit}constructor(e,n,m){super(),this.loadingService=e,this.cdRef=n,this.formWrapper=m,this.placeholder="",this.multiple=!1,this.canEdit=!0,this.elId="",this.appearance="fill",this.compareWithFn=(K,P)=>K===P,this.isLoading=!1}ngOnInit(){u.updateStatusOnFormChange(this.fg,this.destroyed$,()=>this.changeControlEnabled())}ngOnChanges(e){e.elId&&this.elId&&this.initLoadingSubscription(),(e.canEdit||e.options)&&this.changeControlEnabled()}initLoadingSubscription(){D.untilDestroyed(this.loadingService.isLoadingById$(this.elId),this.destroyed$).subscribe(e=>{this.isLoading=e,this.changeControlEnabled(),this.cdRef.detectChanges()})}changeControlEnabled(){!this.isLoading&&this.hasOptions()&&this.canEditSelf?this.control?.enable():this.control?.disable()}hasOptions(){return!F.isEmpty(this.options)}getErrText(){let e=Object.keys(this.control?.errors??[]);return w[e[0]]||"Invalid field"}static{this.\u0275fac=function(n){return new(n||t)(d(j),d(I),d(k))}}static{this.\u0275cmp=g({type:t,selectors:[["app-select","fcName","","labelText","","options",""]],inputs:{fcName:"fcName",labelText:"labelText",options:"options",placeholder:"placeholder",invalid:"invalid",helpers:"helpers",errText:"errText",multiple:"multiple",canEdit:"canEdit",elId:"elId",appearance:"appearance",compareWithFn:"compareWithFn"},standalone:!0,features:[x,_,C],attrs:q,decls:1,vars:1,consts:[["class","input-container",3,"appearance","formGroup",4,"ngIf"],[1,"input-container",3,"appearance","formGroup"],[4,"ngIf"],[3,"placeholder","formControlName","multiple","compareWith","id"],[3,"id","value",4,"ngFor","ngForOf"],["class","input-loading-container",4,"ngIf"],["class","helper",4,"ngIf"],[3,"id","value"],[1,"input-loading-container"],[3,"size"],[1,"helper"]],template:function(n,m){n&1&&s(0,Y,7,12,"mat-form-field",0),n&2&&o("ngIf",m.options!=null)},dependencies:[S,z,U,R,$,W,M,N,O,L,B,A,E,b,y,G],changeDetection:0})}}return t})();export{ue as a};
