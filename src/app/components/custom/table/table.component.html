<table class="data-table" [appSetId]="elId">
  <thead class="table-header" id="cTableHeader">
    <tr>
      <th
        *ngFor="let itemConfig of itemConfigs"
        class="table-item column-sort"
        (click)="onOrderBy(itemConfig.key)"
      >
        {{ itemConfig.header }}
        <app-icon
          [ngClass]="{ 'active-sort': orderBy?.key === itemConfig.key }"
          [icon]="orderBy?.direction === 'asc' ? Icons.ArrowUpward : Icons.ArrowDownward"
          [size]="20"
        >
        </app-icon>
      </th>
      <th *ngIf="canShowActions()"></th>
    </tr>
  </thead>
  <tbody id="cTableBody" *ngIf="(isLoading$ | async) !== true">
    <tr
      *ngFor="let item of orderedItems; let itemIndex = index; trackBy: getItemId"
      class="table-row"
    >
      <td *ngFor="let itemConfig of itemConfigs" class="table-item">{{ item[itemConfig.key] }}</td>
      <td *ngIf="canShowActions()" class="text-right actions">
        <app-icon
          *ngFor="let icon of icons"
          [appSetId]="'cTable' + icon.id + itemIndex"
          [icon]="icon.icon"
          [color]="icon.color"
          [url]="icon.urlType != null ? buildUrl() : undefined"
          [queryParams]="
            icon.urlType != null
              ? buildQueryParams(getItemId(itemIndex, item), icon.urlType)
              : undefined
          "
          [clickable]="true"
          (clicked)="icon.onClick?.(getItemId(itemIndex, item))"
        ></app-icon>
      </td>
    </tr>
  </tbody>
  <ng-template #loadingBody [ngIf]="isLoading$ | async">
    <tbody id="cTableBody">
      <tr class="table-row">
        <td class="table-item loading-item" colspan="100%">
          <app-loading [isLoading]="true" [size]="100"> </app-loading>
        </td>
      </tr>
    </tbody>
  </ng-template>
</table>
