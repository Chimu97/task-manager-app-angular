<div
  class="slide"
  (click)="onSlideClick(slide)"
  [ngClass]="{
  weekend: slide.isWeekend,
  active: slide.selected,
  holiday: slide.isHoliday,
  special: slide.isSpecial,
}"
  [id]="'cTimesheetSlide' + slide.date"
>
  <header class="slide-header">
    <div>
      <span class="day">
        {{ slide.day }}
      </span>
      <span class="day-of-week">
        {{ slide.dayOfWeek }}
      </span>
    </div>
    <app-icon *ngIf="slide.isToday" title="Today" [icon]="Icons.Today"></app-icon>
  </header>
  <div class="slide-body">
    <ng-template [ngIf]="metrics$ | async" let-metrics [ngIfElse]="noMetrics">
      <ng-template #slideBodyTemplate let-profile>
        <!-- TODO refactor to component? -->
        <span
          class="tasks"
          [ngClass]="getTasksClasses(metrics, profile)"
          title="{{ metrics.totalTasks }} total tasks"
        >
          <app-icon [icon]="Icons.Assignment"></app-icon>
          {{ metrics.totalTasks }}
          <ng-container *ngIf="profile != null"> / {{ profile?.tasksTarget }} </ng-container>
        </span>
        <span
          class="hours"
          [ngClass]="getTotalHoursClasses(metrics, profile)"
          title="Time spent: {{ metrics.workedHours }}"
        >
          <app-icon [icon]="Icons.Timelapse"></app-icon>
          {{ metrics.workedHours | time }}
          <ng-container *ngIf="profile != null"> / {{ profile?.timeTarget | time }} </ng-container>
        </span>
        <span class="rating" title="{{ metrics.averageRating }} average rating">
          <app-icon [icon]="Icons.Star"></app-icon>
          {{ metrics.averageRating }}
        </span>
      </ng-template>
      <ng-container *ngTemplateOutlet="slideBodyTemplate; context: { $implicit: profile$ | async }">
      </ng-container>
    </ng-template>
    <ng-template #noMetrics>
      <span class="no-metrics">
        <app-icon
          [title]="!slide.selected ? 'Add timesheet' : ''"
          [icon]="Icons.AddCircleOutline"
          [size]="48"
        ></app-icon>
      </span>
    </ng-template>
  </div>
</div>
